import{a as Q,b as U,c as W,d as X,e as Y}from"./chunk-WZLQVCDA.js";import{a as P,b as n,d as k,e as B,i as V,k as j,l as $,m as G,n as O,o as R,p as L,q as H}from"./chunk-2YUVB3FG.js";import{b as D,c as A,g as J,o as K}from"./chunk-PMVODS2J.js";import{Aa as c,Ba as u,Ca as f,Fa as g,Ga as x,Ja as C,La as M,Ma as p,Na as b,Q as v,S as h,T as _,U as S,ac as I,cc as T,dc as q,ec as w,jb as E,jc as z,pb as N,ra as m,va as F,xa as d,ya as o,za as s}from"./chunk-EV3K43WP.js";import"./chunk-TUXIIIP4.js";var Z=e=>new Date(e.value).getTime()>Date.now()?{dateInFuture:!0}:null;function it(e,t){if(e&1&&(u(0),o(1,"label",9),p(2),s(),o(3,"mat-form-field"),c(4,"input",10),o(5,"mat-error"),p(6),s()(),f()),e&2){let a=t.$implicit,i=x();m(1),d("for",a),m(1),b(a),m(2),d("type",a!=="creationDate"?"text":"date")("id",a)("formControlName",a),m(2),b(i.getError(a))}}function rt(e,t){if(e&1&&(u(0),o(1,"label",9),p(2,"tag"),s(),o(3,"mat-form-field"),c(4,"input",11),o(5,"mat-error"),p(6,"Tag is required"),s()(),f()),e&2){let a=t.index;m(1),C("for","tag",a,""),m(3),C("id","tag",a,""),d("formControlName",a)}}var tt=(()=>{let t=class t{constructor(){this.class="flex justify-center py-8",this.fb=h(R),this.adminForm=this.fb.group({title:["",[n.required,n.minLength(3),n.maxLength(20)]],description:["",[n.maxLength(255)]],img:["",n.required],video:["",n.required],creationDate:["",[n.required,Z]],tags:this.fb.array([this.fb.control("",{validators:n.required})])}),this.entries=["title","description","img","video","creationDate"],this.store=h(J)}getError(i){let r=this.adminForm.controls[i];switch(!0){case r.hasError("required"):return`Please enter a ${i!=="img"&&i!=="video"?i:`link to the ${i}`}`;case r.hasError("minlength"):return`The ${i} is too short`;case r.hasError("maxlength"):return`The ${i} is too long`;case r.hasError("dateInFuture"):return`The ${i} is is invalid`;default:return null}}addTag(){this.adminForm.controls.tags.push(this.fb.control("",{validators:n.required}))}reset(){this.adminForm.reset(),this.adminForm.controls.tags.clear(),this.adminForm.controls.tags.push(this.fb.control("",{validators:n.required}))}submit(){this.adminForm.invalid||this.store.dispatch(K(this.adminForm.value))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_({type:t,selectors:[["admin-page"]],hostVars:2,hostBindings:function(r,l){r&2&&M(l.class)},decls:14,vars:4,consts:[[1,"flex","flex-col","bg-slate-200","p-8","w-1/3",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["formArrayName","tags"],[1,"flex","justify-between"],["type","button","mat-mini-fab","","color","primary",3,"disabled","click"],["fontIcon","plus_one"],[1,"flex","justify-between","mt-4"],["type","button","effect","raised",3,"click"],["effect","raised","color","primary","type","submit"],[1,"capitalize",3,"for"],["matInput","",3,"type","id","formControlName"],["type","text","required","","matInput","",3,"id","formControlName"]],template:function(r,l){r&1&&(o(0,"form",0),g("ngSubmit",function(){return l.submit()}),o(1,"h2"),p(2,"Create new card"),s(),F(3,it,7,6,"ng-container",1),u(4,2),F(5,rt,7,3,"ng-container",1),f(),o(6,"div",3)(7,"button",4),g("click",function(){return l.addTag()}),c(8,"mat-icon",5),s()(),o(9,"div",6)(10,"app-button",7),g("click",function(){return l.reset()}),p(11,"Reset"),s(),o(12,"app-button",8),p(13,"Create card"),s()()()),r&2&&(d("formGroup",l.adminForm),m(3),d("ngForOf",l.entries),m(2),d("ngForOf",l.adminForm.controls.tags.controls),m(2),d("disabled",l.adminForm.controls.tags.length===5))},dependencies:[V,P,k,B,O,j,G,$,X,U,Q,E,I,D,q],encapsulation:2});let e=t;return e})();var ot=[{path:"",component:tt}],qt=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=S({type:t}),t.\u0275inj=v({imports:[z.forChild(ot),L,H,Y,W,N,T,A,w]});let e=t;return e})();export{qt as AdminModule};
